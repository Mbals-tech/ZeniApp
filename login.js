import { useState } from 'react'; import { useRouter } from 'next/router'; export default function Login(){ const [phone,setPhone] = useState(''); const [password,setPassword] = useState(''); const [err,setErr] = useState(''); const router = useRouter(); async function submit(e){ e.preventDefault(); setErr(''); try{ const res = await fetch('/api/auth/login', { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({ phone, password })}); const j = await res.json(); if(!res.ok) return setErr(j.error||'Login failed'); localStorage.setItem('token', j.token); router.push('/dashboard'); } catch(e){ setErr('Network error'); } } return ( <div style={{maxWidth:600, margin:'40px auto', fontFamily:'sans-serif', padding:'0 16px'}}> <h2>Login</h2> <form onSubmit={submit}> <label>Phone<br/><input value={phone} onChange={e=>setPhone(e.target.value)} required/></label><br/><br/> <label>Password<br/><input type="password" value={password} onChange={e=>setPassword(e.target.value)} required/></label><br/><br/> {err && <div style={{color:'red'}}>{err}</div>} <button type="submit">Login</button> </form> </div> ); }